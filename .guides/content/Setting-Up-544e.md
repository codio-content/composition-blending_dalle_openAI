We will explore various techniques to combine and blend multiple generated images, creating complex and visually engaging compositions. By the end of this lesson, you will be able to create unique and captivating images by combining the power of the DALL-E API with PIL's image manipulation capabilities.


Image composition and blending are essential techniques in digital image processing, allowing you to create new images by combining multiple images or layers. By understanding how to manipulate image layers and control their transparency and visibility, you can create a wide range of visual effects and styles. In this lesson, we will cover:
|||
- **Image Compositing**: Learn how to combine multiple images using masks, controlling the transparency and visibility of different image layers.
- **Image Blending**: Explore various blending modes, such as multiply, screen, and overlay, to create unique effects when combining two images.
- **Advanced Blending Techniques**: Develop custom blend modes and gradient masks for greater control and flexibility in image composition.
- **Creative Image Compositions**: Apply the techniques learned in this module to design and create complex image compositions with generated images from the DALL-E 2 API.

|||
### Generate base image
We are going to import our libraries and API key then we are going to create our function. 
``` python
import os
import openai
import secret
from PIL import Image, ImageOps,ImageChops
from io import BytesIO
import requests

openai.api_key = secret.api_key

# Generate the base image
def generate_base_image(prompt):
    response = openai.Image.create(
        prompt=prompt,
        n=1,
        size="512x512"
    )
    return response['data'][0]['url']

```
{Try it!}(python3 imageGen.py 1)


You can use the function below in your code to download images generated by the DALL-E 2 API using their URLs. The function uses the `requests` library to download the image data and `BytesIO` from the `io` module to load the data into a PIL Image object. We also save the image as a file for later use, just in case. 
```python
def download_image(image_url,x):
    response = requests.get(image_url)
    img_data = response.content
    img = Image.open(BytesIO(img_data))
    with open(x+'.jpg', 'wb') as handler:
      handler.write(img_data)
    return img
```
{Try it!}(python3 imageGen.py 2)

{Check It!|assessment}(multiple-choice-138835245)
